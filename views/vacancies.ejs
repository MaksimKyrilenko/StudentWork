<% layout('./layout/page.ejs') %>

<div class="vacancies-container">
    <h2 class="section-title">–°–ø–∏—Å–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π</h2>

    <!-- Navigation Links -->
    <div class="navigation1">
        <a href="#featured-vacancies" class="nav-link1">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏</a>
        <a href="#statistics" class="nav-link1">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π</a>
        <a href="#job-tips" class="nav-link1">–°–æ–≤–µ—Ç—ã –ø–æ –ø–æ–∏—Å–∫—É —Ä–∞–±–æ—Ç—ã</a>
        <a href="#employee-reviews" class="nav-link1">–û—Ç–∑—ã–≤—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</a>
        <a href="#faq" class="nav-link1">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a>
    </div>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π..." class="search-input" />
        <button id="searchButton" class="search-button">üîç –ü–æ–∏—Å–∫</button>
        <div id="suggestions" class="suggestions-container"></div> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ -->
    </div>

    <div class="vacancies" id="vacanciesList">
        <% if (vacancies && vacancies.length > 0) { %>
            <% vacancies.forEach(function(vacancy) { %>
                <div class="vacancy-card" data-title="<%= vacancy.title.toLowerCase() %>">
                    <div class="vacancy-card-header">
                        <h3><%= vacancy.title %></h3>
                        <p class="company"><%= vacancy.company %></p>
                    </div>
                    <div class="vacancy-card-body">
                        <strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong>
                        <p><%= vacancy.description %></p>
                        <strong>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</strong>
                        <p><%= vacancy.location %></p>
                        <strong>–ó–∞—Ä–ø–ª–∞—Ç–∞</strong>
                        <p><%= vacancy.salary %></p>
                    </div>
                    <button class="details-button" onclick="window.location.href='/jobdetail?id=<%= vacancy.id %>'">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                </div>
            <% }); %>
        <% } else { %>
            <div class="no-vacancies">
                <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π</p>
            </div>
        <% } %>
    </div>

    <!-- New Blocks with Interesting Information -->
    <div id="job-tips" class="info-block">
        <h3>–°–æ–≤–µ—Ç—ã –ø–æ –ø–æ–∏—Å–∫—É —Ä–∞–±–æ—Ç—ã</h3>
        <p>–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ. –ò–∑—É—á–∞–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é –ø–µ—Ä–µ–¥ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ–º –∏ –±—É–¥—å—Ç–µ —É–≤–µ—Ä–µ–Ω—ã –≤ —Å–≤–æ–∏—Ö –Ω–∞–≤—ã–∫–∞—Ö.</p>
    </div>

    <div id="employee-reviews" class="info-block">
        <h3>–û—Ç–∑—ã–≤—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
        <p>–ù–∞—à–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Å–≤–æ–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ –æ —Ä–∞–±–æ—á–µ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–µ: "–û—Ç–ª–∏—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞!"</p>
    </div>

    <div id="faq" class="info-block">
        <h3>–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>
        <ul>
            <li><strong>–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é?</strong> –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∞–∫–∞–Ω—Å–∏–∏.</li>
            <li><strong>–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å?</strong> –í–∞–º –Ω—É–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ä–µ–∑—é–º–µ –∏, –µ—Å–ª–∏ –µ—Å—Ç—å, —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ.</li>
        </ul>
    </div>
</div>

<style>
        body {
        background-color: #f7f9fc; /* –õ–µ–≥–∫–∏–π —Ñ–æ–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        color: #333; /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
        margin: 0;
        font-family: 'Roboto', sans-serif;
    }

    .vacancies-container {
        max-width: 1200px;
        margin: 60px auto 40px;
        padding: 40px;
        background-color: #ffffff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        border-radius: 12px;
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        animation: fadeIn 1s ease-in-out;
    }

    h2.section-title, h3 {
        text-align: center;
        color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
        font-size: 2.5em;
        margin-bottom: 25px;
    }

    .navigation1 {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
        background-color: #f7f9fc; /* –õ–µ–≥–∫–∏–π —Ñ–æ–Ω –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        padding: 10px 0;
        border-radius: 30px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .nav-link1 {
        margin: 0 20px;
        text-decoration: none;
        color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç —Å—Å—ã–ª–æ–∫ */
        font-weight: bold;
        font-size: 1.2em;
        padding: 8px 16px;
        border-radius: 12px;
        transition: all 0.3s ease;
    }

    .nav-link1:hover {
        color: #fff;
        background-color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        transform: translateY(-3px);
    }

    .nav-link1:focus {
        outline: none;
        border: 2px solid #0056b3;
        box-shadow: 0 0 8px rgba(0, 86, 179, 0.5);
    }

    .nav-link1:active {
        background-color: #003d7a; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ */
        transform: translateY(0);
    }

    .search-container {
        display: flex;
        justify-content: center;
        margin-bottom: 30px;
        position: relative;
    }

    .search-input {
        padding: 12px 20px;
        border: 2px solid #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç —Ä–∞–º–∫–∏ */
        border-radius: 30px;
        width: 70%;
        margin-right: 15px;
        font-size: 1em;
        transition: border-color 0.3s ease, transform 0.2s ease;
    }

    .search-input:focus {
        border-color: #003d7a; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
        outline: none;
        transform: scale(1.03);
    }

    .search-button {
        padding: 12px 20px;
        background-color: #007bff; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ */
        color: #ffffff;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        font-weight: bold;
        font-size: 1.1em;
    }

    .search-button:hover {
        background-color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        transform: scale(1.05);
    }

    .suggestions-container {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: white;
        border: 2px solid #ddd;
        border-radius: 10px;
        max-height: 200px;
        overflow-y: auto;
        display: none;
        z-index: 1000;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        animation: fadeIn 0.3s ease;
    }

    .vacancies {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        margin-top: 30px;
    }

    .vacancy-card {
        background-color: #ffffff;
        border: 1px solid #ddd;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        width: 300px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        position: relative;
        animation: fadeIn 0.5s ease-out;
    }

    .vacancy-card-header {
        margin-bottom: 15px;
    }

    .vacancy-card-header h3 {
        font-size: 1.6em;
        margin-bottom: 10px;
    }

    .vacancy-card-header .company {
        font-size: 1.2em;
        color: #555;
    }

    .vacancy-card-body {
        margin-bottom: 20px;
    }

    .vacancy-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    }

    .details-button {
        padding: 10px 15px;
        background-color: #28a745; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ */
        color: white;
        text-decoration: none;
        border-radius: 30px;
        text-align: center;
        transition: background-color 0.3s ease, transform 0.2s ease;
        font-weight: bold;
    }

    .details-button:hover {
        background-color: #218838; /* –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        transform: scale(1.05);
    }

    .no-vacancies {
        text-align: center;
        color: #777;
        font-size: 1.2em;
    }

    .info-block {
        margin-top: 40px;
        background-color: #f1f8ff; /* –°–≤–µ—Ç–ª–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω –¥–ª—è –±–ª–æ–∫–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .info-block h3 {
        margin-bottom: 15px;
        color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ –±–ª–æ–∫–∞—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
    }

    .info-block p {
        color: #555; /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
        font-size: 1.1em;
    }

    .info-block ul {
        list-style-type: none;
        padding: 0;
        font-size: 1.1em;
        color: #555;
    }

    .info-block ul li {
        margin: 10px 0;
    }

    /* Media Queries for responsiveness */
    @media (max-width: 768px) {
        .vacancies-container {
            padding: 20px;
            margin: 20px;
        }

        .search-container {
            flex-direction: column;
            align-items: center;
        }

        .search-input {
            width: 100%;
            margin-right: 0;
            margin-bottom: 10px;
        }

        .vacancy-card {
            width: 100%;
        }

        h2.section-title {
            font-size: 2em;
        }

        .nav-link1 {
            font-size: 1em;
            margin: 0 10px;
        }

        .details-button {
            font-size: 1em;
        }

        .info-block {
            padding: 15px;
        }

        .info-block h3 {
            font-size: 1.5em;
        }
    }

    @keyframes fadeIn {
        0% { opacity: 0; transform: translateY(-10px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    .vacancy-card-footer {
        margin-top: 10px;
        font-size: 1.2em;
    }

    .vacancy-card-footer a {
        text-decoration: none;
        color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ —Ñ—É—Ç–µ—Ä–µ */
        font-weight: bold;
    }

    .vacancy-card-footer a:hover {
        text-decoration: underline;
    }

</style>

<script>
    const vacanciesList = JSON.parse('<%- JSON.stringify(vacancies) %>');

    document.getElementById('searchInput').addEventListener('input', function() {
        const searchInput = this.value.toLowerCase();
        const suggestionsContainer = document.getElementById('suggestions');
        suggestionsContainer.innerHTML = '';

        if (searchInput) {
            const filteredVacancies = vacanciesList.filter(vacancy => 
                vacancy.title.toLowerCase().includes(searchInput)
            );

            if (filteredVacancies.length > 0) {
                suggestionsContainer.style.display = 'block';
                filteredVacancies.forEach(vacancy => {
                    const suggestionItem = document.createElement('div');
                    suggestionItem.className = 'suggestion-item';
                    suggestionItem.textContent = vacancy.title;
                    suggestionItem.onclick = function() {
                        document.getElementById('searchInput').value = vacancy.title;
                        suggestionsContainer.innerHTML = '';
                        suggestionsContainer.style.display = 'none';
                        showVacancy(vacancy.title.toLowerCase());
                    };
                    suggestionsContainer.appendChild(suggestionItem);
                });
            } else {
                suggestionsContainer.style.display = 'none';
            }
        } else {
            suggestionsContainer.style.display = 'none';
        }
    });

    document.getElementById('searchButton').addEventListener('click', function() {
        const searchInput = document.getElementById('searchInput').value.toLowerCase();
        const vacancyCards = document.querySelectorAll('.vacancy-card');
        let found = false;

        vacancyCards.forEach(function(vacancy) {
            const title = vacancy.getAttribute('data-title');
            if (title.includes(searchInput)) {
                vacancy.style.display = 'block';
                found = true;
            } else {
                vacancy.style.display = 'none';
            }
        });

        const noVacanciesMessage = document.querySelector('.no-vacancies');
        if (!found) {
            noVacanciesMessage.innerHTML = '<p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π</p>';
            noVacanciesMessage.style.display = 'block';
        } else {
            noVacanciesMessage.style.display = 'none';
        }

        document.getElementById('suggestions').style.display = 'none';
    });
</script>
